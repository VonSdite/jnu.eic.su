function UserCenterInit(){function e(){document.getElementById("personal_data").innerHTML="";document.getElementById("change_personal_data").innerHTML="";document.getElementById("change_password").innerHTML="";document.getElementById("empty_schedule").innerHTML="";document.getElementById("change_empty_schedule").innerHTML="";document.getElementById("contacts_books").innerHTML=""}ShowPersonalData();document.getElementById("main_user_info").onclick=function(){e();ShowPersonalData()};document.getElementById("user_kong_ke_biao").onclick=function(){e();ShowEmptySchedule()};document.getElementById("user_address_book").onclick=function(){e();ShowContactsBooks()}}function GetPersonalData(){var e;$.ajax({url:URL+"/message",data:{},type:"post",async:false,dataType:"json",success:function(t){e=t}});console.log("接收数据:");console.log(e);return e}function PostPersonalDataToServer(e){var t;$.ajax({url:URL+"/modify",data:e,async:false,type:"post",dataType:"json",success:function(e){t=e}});if(1)return true;else return false}function PostPassWordToServer(e){e=hex_md5(e);console.log(e);var t={password:hex_md5(e)};var n;$.ajax({url:URL+"/change",data:t,async:false,dataType:"json",success:function(e){n=e}});alert(n.status);if(1){return true}else return false}function CheckPassWord(e){e=hex_md5(e);console.log(e);var t={password:e};var n;$.ajax({url:URL+"/check",data:t,async:false,dataType:"json",success:function(e){n=e}});if(n.status){alert("正确");return true}else{alert("错误");return false}}function GetEmptySchedule(){var e=new Array;for(var t=0;t<7;++t)e[t]=new Array;var n;$.ajax({url:URL+"/table",data:{},async:false,dataType:"json",success:function(e){n=e}});var r=new Array("没课","双周有课","单周有课","有课");for(var t=0;t<7;++t){for(var i=0;i<13;++i){e[t][i]=r[n[t][i]]}}return e}function GetContactsBooks(){function e(e,t,n,r,i,s,o,u,a,f,l,c){this.name=n;this.depart=e;this.post=t;this.longPhoneNum=i;this.shortPhoneNum=s;this.QQNum=r;this.dormNO=o;this.grade=l;this.major=c;this.birType=u;this.month=a;this.day=f}var t=new Array;var n;$.ajax({url:URL+"/address",data:{},async:false,dataType:"json",type:"post",success:function(e){n=e}});var r={num:n.length,person:n};for(var i=0;i<r.num;++i){var s=new e(r.person[i].depart,r.person[i].post,r.person[i].name,r.person[i].QQNum,r.person[i].longPhoneNum,r.person[i].shortPhoneNum,r.person[i].dormNO,r.person[i].birType,r.person[i].month,r.person[i].day,r.person[i].grade,r.person[i].major);t.push(s)}console.log("通讯录接收数据:");console.log(t);return t}function PostESToServer(e){var t={sun:e[0],mon:e[1],tue:e[2],wed:e[3],thu:e[4],fri:e[5],sat:e[6]};var n;$.ajax({url:URL+"/gettable",data:t,type:"post",async:false,dataType:"json",success:function(e){n=e}});if(n.back)return true;else return false}function ShowPersonalData(){if(flagUserData==0){objPersonalData=GetPersonalData();flagUserData=1}var e;e='<div class="sign_of_click" id="user_info_sign" >\n'+"</div>\n"+'<div class="work_filed" id="user_info_work_filed">\n'+'<div class="main_per_info">\n'+'<div class="account" id="account_info">\n'+"<h2>账户信息</h2>\n"+'<div class="info_item">\n'+"<p>账号：</p>\n"+"<p>姓名：</p>\n"+"<p>用户类型：</p>\n"+"<p>所属部门：</p>\n"+"<p>职位：</p>\n"+"</div>\n"+'<div class="info_item" id="account_info_detail"><!--这是要从服务器拿数据的，这里只是例子-->\n'+"<p>"+objPersonalData.account+"&nbsp;</p>\n"+"<p>"+objPersonalData.name+"&nbsp;</p>\n"+"<p>"+arrUserType[objPersonalData.type-1]+"&nbsp;</p>\n"+"<p>"+arrDepartName[objPersonalData.apartment-1]+"&nbsp;</p>\n"+"<p>"+objPersonalData.position+"&nbsp;</p>\n"+"</div>\n"+"</div>\n"+'<div class="account" id="contact_info">\n'+"<h2>联系方式</h2>\n"+'<div class="info_item">\n'+"<p>长号：</p>\n"+"<p>短号：</p>\n"+"<p>QQ：</p>\n"+"<p>宿舍号：</p>\n"+"<p>常用邮箱：</p>\n"+"</div>\n"+'<div class="info_item" id="contact_info_detail">\n'+"<p>"+objPersonalData.phone+"&nbsp;</p>\n"+"<p>"+objPersonalData.short+"&nbsp;</p>\n"+"<p>"+objPersonalData.qq+"&nbsp;</p>\n"+"<p>"+objPersonalData.dorm+"&nbsp;</p>\n"+"<p>"+objPersonalData.mail+"&nbsp;</p>\n"+"</div>\n"+"</div>\n"+'<div class="account" id="personal_info">\n'+"<h2>个人信息</h2>\n"+'<div class="info_item">\n'+"<p>性别：</p>\n"+"<p>年级：</p>\n"+"<p>专业：</p>\n"+"<p>生日：</p>\n"+"</div>\n"+'<div class="info_item" id="personal_info_detail">\n'+"<p>"+arrGender[objPersonalData.sex]+"&nbsp;</p>\n"+"<p>"+objPersonalData.grade+"&nbsp;</p>\n"+"<p>"+arrMajorName[objPersonalData.major]+"&nbsp;</p>\n"+"<p>";if(objPersonalData.birthmonth==""||objPersonalData.birthday==""){e+="生日未填写- -"}else{if(objPersonalData.birthtype==1){e+="农历 "+lunarMonths[objPersonalData.birthmonth-1]+lunarMonthDays[objPersonalData.birthday-1]}else{e+="公历 "+gregorianMonths[objPersonalData.birthmonth-1]+gregorianDays[objPersonalData.birthday-1]}}e+="&nbsp;</p>\n"+"</div>\n"+"</div>\n"+"</div>\n"+'<div class="modification" id="per_info_modf_button">\n'+'<button type="button" class="user_center_modf_button" name="per_info_modf_apy" id="per_info_modf_apy" title="修改个人资料">\n'+"修改\n"+"</button>\n"+'<a href="#" id="passworld_change">\n'+"修改密码\n"+"</a>\n"+"</div>\n"+"</div>\n";$("#personal_data").hide().html(e);$("#per_info_modf_apy").click(function(){$("#personal_data").html("");flagUserData=0;ChangePersonalData(objPersonalData)});$("#passworld_change").click(function(){$("#personal_data").html("");ChangePassWord()});$("#personal_data").slideDown()}function PrintToHTML(e,t){var n;n='<div class="sign_of_click" id="user_info_sign" >\n'+"</div>\n"+'<div class="work_filed" id="user_info_work_filed">\n'+"<form method="+"post"+' action="#" >\n'+'<div class="main_per_info">\n'+'<div class="account" id="account_info">\n'+"<h2>账户信息</h2>\n"+'<div class="info_item">\n'+"<p>账号：</p>\n"+"<p>姓名：</p>\n"+"<p>用户类型：</p>\n"+"<p>所属部门：</p>\n"+"<p>职位：</p>\n"+"</div>\n"+'<div class="info_item" id="account_info_detail"><!--这是要从服务器拿数据的，这里只是例子-->\n'+"<p>\n"+e.account+"\n"+"<!--账号当然是不允许修改的-->\n"+"</p><!--这里的默认值是修改前的用户名，从数据库中抓，假设这一部分是用javascript实现的，与服务器通行的是javascipt-->\n"+"<p>\n"+'<input type="text" id="modf_user_name" name="modf_user_name" value='+e.name+" />\n"+"</p>\n"+"<p>\n"+'<select id="modf_user_type">\n';for(var r=0;r<arrUserType.length;r++){n+='<option value="'+(r+1)+'">'+arrUserType[r]+"</option>\n"}n+="</select>\n"+"</p>\n"+"<p>\n"+'<select id="modf_user_department">\n';for(var r=0;r<arrDepartName.length;r++){n+='<option value="'+(r+1)+'">'+arrDepartName[r]+"</option>"}n+="</select>\n"+"</p>\n"+"<p>\n"+'<input type="text" id="modf_user_position" name="modf_user_position" value="'+e.position+'" />\n'+"</p>\n"+"</div>\n"+"</div>\n"+'<div class="account" id="contact_info">\n'+"<h2>联系方式</h2>\n"+'<div class="info_item">\n'+"<p>长号：</p>\n"+"<p>短号：</p>\n"+"<p>QQ：</p>\n"+"<p>宿舍号：</p>\n"+"<p>常用邮箱：</p>\n"+"</div>\n"+'<div class="info_item" id="contact_info_detail">\n'+"<p>\n"+'<input type="text" id="modf_user_lphnum" name="modf_user_lphnum" value="'+e.phone+'" />\n'+"</p>\n"+"<p>\n"+'<input type="text" id="modf_user_sphnum" name="modf_user_sphnum" value="'+e.short+'" />\n'+"</p>\n"+"<p>\n"+'<input type="text" id="modf_user_qq" name="modf_user_qq" value="'+e.qq+'" />\n'+"</p>\n"+"<p>\n"+'<input type="text" id="modf_user_dorm" name="modf_user_dorm" value="'+e.dorm+'" />\n'+"</p>\n"+"<p>\n"+'<input type="text" id="modf_user_email" name="modf_user_email" value="'+e.mail+'" />\n'+"</p>\n"+"</div>\n"+"</div>\n"+'<div class="account" id="personal_info">\n'+"<h2>个人信息</h2>\n"+'<div class="info_item">\n'+"<p>性别：</p>\n"+"<p>年级：</p>\n"+"<p>专业：</p>\n"+"<p>生日：</p>\n"+"</div>\n"+'<div class="info_item" id="personal_info_detail">\n'+"<p>\n"+'<select id="modf_user_sex">\n'+'<option value="0">女</option>\n'+'<option value="1">男</option>\n'+'<option value="2">不确定</option>\n'+"</select>\n"+"</p>\n"+"<p>\n"+'<select id="modf_user_grade">\n'+'<option value="'+(t-2)+'">'+(t-2)+"</option>\n"+'<option value="'+(t-1)+'">'+(t-1)+"</option>\n"+'<option value="'+t+'">'+t+"</option>\n"+"</select>\n"+"</p>\n"+"<p>\n"+'<select id="modf_user_major">\n';for(var r=0;r<arrMajorName.length;r++){n+='<option value="'+r+'">'+arrMajorName[r]+"</option>"}n+="</select>\n"+"</p>\n"+"<p>\n"+'<select id="birthday_type">\n'+'<option value="gregorian">公历</option>\n'+'<option value="lunar">农历</option>\n'+"</select>\n"+'<select id="month_type">\n'+'<option value="0">Month</option>\n'+"</select>\n"+'<select id="days_type">\n'+'<option value="0">Day</option>\n'+"</select>\n"+"</p>\n\n"+"</div>\n"+"</div>\n"+"</div>\n"+'<div id="modf_error">\n'+"</div>\n"+'<div class="modification" id="per_info_modf_button">\n'+'<button type="button" class="user_center_modf_button" name="per_info_modf_submit" id="per_info_modf_submit" title="保存修改的个人资料">\n'+"保存\n"+"</button>\n"+"</div>\n"+"</form>\n\n"+"</div>\n";document.getElementById("change_personal_data").innerHTML=n}function ChangePersonalData(e){function a(){e.birthtype=this.selectedIndex;if(e.birthtype==1){f();c()}if(e.birthtype==0){l();h()}e.month=o.selectedIndex+1;e.day=u.selectedIndex+1}function f(){o.options.length=0;for(var e=0;e<12;++e)o.options[e]=new Option(lunarMonths[e])}function l(){o.options.length=0;for(var e=0;e<12;++e){var t=e+1+"月";o.options[e]=new Option(t);o.options[e].value=e}}function c(){u.options.length=0;for(var e=0;e<30;++e)u.options[e]=new Option(lunarMonthDays[e])}function h(){var e=o.options[o.selectedIndex].value;var t=parseInt(e);u.options.length=0;for(var n=0;n<greMonthDays[t];++n){if(t==2)console.log(n);u.options[n]=new Option(n+1)}}function d(){if(arrUserType[e.type-1]=="主席团"){if(arrDepartName[e.apartment-1]!="主席团")p='*用户类型为"主席团"时，所属部门必须为"主席团"'+"<br />";else p=""}else if(arrUserType[e.type-1]=="人力干事"){if(arrDepartName[e.apartment-1]!="人力资源部")p='*用户类型为"人力干事"时，所属部门必须为"人力资源部"'+"<br />";else p=""}else if(arrDepartName[e.apartment-1]=="主席团")p='*用户类型为非"主席团"，所属部门不能为"主席团"'+"<br />";else p=""}function m(){var t=/^[0-9]+$/;var n=t.test(e.phone);if(!n)v="*请正确填写长号"+"<br />";else v=""}function y(){var t=/^[0-9]{6}$/;var n=t.test(e.short);if(!n)g="*请正确填写短号"+"<br />";else g=""}function w(){var t=/^[0-9]+$/;var n=t.test(e.qq);if(!n)b="*请正确填写QQ号"+"<br />";else b=""}function S(){var t=/^[0-9]{4}$/;var n=t.test(e.dorm);if(!n)E="*请正确填写宿舍号"+"<br />";else E=""}function T(){var t=/^[a-z0-9](\w|\.|-)*@([a-z0-9]+-?[a-z0-9]+\.){1,3}[a-z]{2,4}$/;var n=t.test(e.mail);if(!n)x="*请正确填写邮箱"+"<br />";else x=""}flagUserData=0;falgTXL=0;var t;var n=new Date;var r=n.getMonth();var i=n.getFullYear();if(r<8)t=i-1;else t=i;PrintToHTML(e,t);document.getElementById("modf_user_type").selectedIndex=e.type-1;document.getElementById("modf_user_department").selectedIndex=e.apartment-1;document.getElementById("modf_user_sex").selectedIndex=e.sex;$("#modf_user_grade").val(e.grade);$("#modf_user_major").val(e.major);var s=document.getElementById("birthday_type");var o=document.getElementById("month_type");var u=document.getElementById("days_type");if(e.birthtype==0){l();h();s.selectedIndex=0;o.selectedIndex=e.birthmonth-1;u.selectedIndex=e.birthday-1}else{f();c();s.selectedIndex=1;o.selectedIndex=e.birthmonth-1;u.selectedIndex=e.birthday-1}s.onchange=a;o.onchange=function(){e.birthtype=s.selectedIndex;e.birthmonth=this.selectedIndex+1;e.birthday=u.selectedIndex+1};u.onchange=function(){e.birthtype=s.selectedIndex;e.birthmonth=o.selectedIndex+1;e.birthday=this.selectedIndex+1};document.getElementById("modf_user_name").onchange=function(){e.name=this.value};var p="";document.getElementById("modf_user_type").onchange=function(){e.type=this.selectedIndex+1;d()};document.getElementById("modf_user_department").onchange=function(){e.apartment=this.selectedIndex+1;d()};d();document.getElementById("modf_user_position").onchange=function(){e.position=this.value};var v="";m();document.getElementById("modf_user_lphnum").onchange=function(){e.phone=this.value;m()};var g="";y();document.getElementById("modf_user_sphnum").onchange=function(){e.short=this.value;y()};var b="";w();document.getElementById("modf_user_qq").onchange=function(){e.qq=this.value;w()};var E="";S();$("#modf_user_dorm").change(function(){S();e.dorm=$(this).val()});var x="";T();$("#modf_user_email").change(function(){e.mail=$(this).val();T()});$("#modf_user_sex").change(function(){e.sex=$(this).val()});$("#modf_user_grade").change(function(){e.grade=$(this).val()});$("#modf_user_major").change(function(){e.major=$(this).val()});$("#per_info_modf_submit").click(function(){strError=p+v+g+b+E+x;if(""==strError){console.log("发送数据:");console.log(e);$("#modf_error").html("");if(PostPersonalDataToServer(e)){ShowPersonalData();$("#change_personal_data").html("");return true}else{$("#modf_error").html("*保存失败，请再次保存")}}else{$("#modf_error").html(strError)}})}function ChangePassWord(){var e;e='<div class="sign_of_click" id="user_info_sign" >\n'+"</div>\n"+'<div class="work_filed" id="user_info_work_filed">\n'+'<form method="post" action="#" >\n'+'<div class="main_per_info">\n'+'<div class="account" id="changepw">\n'+'<div class="pwtitleimg">\n'+'<img src="http://jnueicsu-upload.stor.sinaapp.com/image/warnningpw.png" width="32px" height="32px" alt="警告" />\n'+"</div>\n"+'<div class="pwtitleh2">\n'+"<h2>修改密码</h2>\n"+"</div>\n"+'<div class="clearboth">\n'+"</div>\n"+'<div class="info_item">\n'+"<p>当前密码：</p>\n"+"<p>新密码：</p>\n"+"<p>确认密码：</p>\n"+"</div>\n"+'<div class="info_item" id="changepw">\n'+"<p>\n"+'<input type="password" id="currentpw" name="currentpw" />\n'+"</p>\n"+"<p>\n"+'<input type="password" id="newpw" name="newpw" />\n'+"</p>\n"+"<p>\n"+'<input type="password" id="affirmpw" name="affirmpw" />\n'+"</p>\n"+"</div>\n"+"</div>\n"+'<div id="modf_error">\n'+"</div>\n"+'<div class="modification" id="pw_modf_button">\n'+'<button type="button" class="user_center_modf_button" name="pw_modf_submit" id="pw_modf_submit" title="保存新密码">\n'+"保存\n"+"</button>\n"+"</div>\n"+"</div>\n"+"</form>\n"+"</div>\n";document.getElementById("change_password").innerHTML=e;var t=document.getElementById("currentpw");var n=document.getElementById("newpw");var r=document.getElementById("affirmpw");var i="";var s="";var o="";var u="*密码不能为空<br />";var a="*密码不能为空<br />";var f;t.onchange=function(){i=t.value;if(!CheckPassWord(i))u="*密码错误，请重新输入";else u=""};n.onchange=function(){s=n.value;if(o!=""){if(s!=o)a="*两次密码输入不一致,请重新输入<br />";else a=""}else a="*密码不能为空<br />"};r.onchange=function(){o=r.value;if(o!=""){if(s!=o)a="*两次密码输入不一致,请重新输入<br />";else a=""}else a="*密码不能为空<br />"};document.getElementById("pw_modf_submit").onclick=function(){f=u+a;if(""==f){if(PostPassWordToServer(o)){alert("密码修改成功！");document.getElementById("change_password").innerHTML="";ShowPersonalData();return true}else{document.getElementById("modf_error").innerHTML="*密码保存失败，请再次保存";f=""}}else{document.getElementById("modf_error").innerHTML=f;f=""}}}function ShowEmptySchedule(){if(flagKKB==0){arrES=GetEmptySchedule();flagKKB=1}var e='<div class="sign_of_click" id="kkb_sign" >\n'+"</div>\n"+'<div class="work_filed" id="kkb_work_filed">\n'+'<table class="kkb">\n'+"<thead>\n"+"<tr>\n"+"<th>空课表</th>\n"+"<th>周日</th>\n"+"<th>周一</th>\n"+"<th>周二</th>\n"+"<th>周三</th>\n"+"<th>周四</th>\n"+"<th>周五</th>\n"+"<th>周六</th>\n"+"</tr>\n"+"</thead>\n"+"<tbody>\n";var t=new Array("08:00-08:45","08:55-09:40","10:00-10:45","10:55-11:40","12:40-13:25","13:35-14:20","14:30-15:15","15:25-16:10","16:20-17:05","17:15-18:00","19:00-19:45","19:55-20:40","20:50-21:35");for(var n=0;n<13;++n){var r="<tr>\n"+"<th>节"+(n+1)+" "+t[n]+"</th>\n";for(var i=0;i<7;++i){var s="";if(arrES[i][n]=="有课")s="youke";else if(arrES[i][n]=="没课")s="meike";else if(arrES[i][n]=="单周有课")s="danyou";else s="suanyou";r+="<td class="+s+">"+arrES[i][n]+"</td>\n"}e+=r+"</tr>\n"}e+="</tbody>\n"+"</table>\n"+'<div class="modification" id="kkb_modf_buttom">\n'+'<button type="button" class="user_center_modf_button" name="kkb_modf_apy" id="kkb_modf_apy" title="修改空课表">\n'+"修改\n"+"</button>\n"+"</div>\n"+"</div>\n";document.getElementById("empty_schedule").innerHTML=e;document.getElementById("kkb_modf_apy").onclick=function(){document.getElementById("empty_schedule").innerHTML="";flagKKB=0;ChangeEmptySchedule(arrES)}}function ChangeEmptySchedule(e){flagKKB=0;var t='<div class="sign_of_click" id="kkb_sign" >\n'+"</div>\n"+'<div class="work_filed" id="kkb_work_filed">\n'+'<form method="post" action="#">\n'+'<table class="kkb">\n'+"<thead>\n"+"<tr>\n"+"<th>空课表</th>\n"+"<th>周日</th>\n"+"<th>周一</th>\n"+"<th>周二</th>\n"+"<th>周三</th>\n"+"<th>周四</th>\n"+"<th>周五</th>\n"+"<th>周六</th>\n"+"</tr>\n"+"</thead>\n"+"<tbody>\n";var n=new Array("08:00-08:50","09:00-09:50","10:10-11:00","11:10-12:00","12:30-13:20","13:30-14:20","14:30-15:20","15:30-16:20","16:30-17:20","17:30-18:20","19:00-19:50","20:00-20:50","21:00-21:50");for(var r=0;r<13;++r){var i="<tr>\n"+"<th>节"+(r+1)+" "+n[r]+"</th>\n";for(var s=0;s<7;++s){var o="";o=s+"-"+r;var u="<td>\n"+'<select name="kkb_1-1" id='+o+">\n"+'<option value="3">有课</option>\n'+'<option value="2">单周有课</option>\n'+'<option value="1">双周有课</option>\n'+'<option value="0">没课</option>\n'+"</select>\n"+"</td>\n";i+=u}t+=i+"</tr>\n"}t+="</tbody>\n"+"</table>\n"+'<div id="modf_error">\n'+"</div>\n"+'<div class="modification" id="kkb_modf_buttom">\n'+'<button type="button" class="user_center_modf_button" name="kkb_modf_submit" id="kkb_modf_submit" title="保存空课表">\n'+"保存\n"+"</button>\n"+"</div>\n"+"</form>\n"+"</div>\n";document.getElementById("change_empty_schedule").innerHTML=t;for(var a=0;a<13;++a){for(var f=0;f<7;++f){var l=f+"-"+a;obj=document.getElementById(l);if(e[f][a]=="有课")obj.selectedIndex=0;else if(e[f][a]=="单周有课")obj.selectedIndex=1;else if(e[f][a]=="双周有课")obj.selectedIndex=2;else obj.selectedIndex=3}}for(var c=0;c<13;++c){for(var h=0;h<7;++h){var p=h+"-"+c;document.getElementById(p).onchange=function(t){t=t||event;var n=t.srcElement||t.target;p=n.id;var r=document.getElementById(p);var i=p.split("-");var s=parseInt(i[0]);var o=parseInt(i[1]);e[s][o]=r.options[r.selectedIndex].text}}}document.getElementById("kkb_modf_submit").onclick=function(){if(PostESToServer(e)){document.getElementById("change_empty_schedule").innerHTML="";ShowEmptySchedule()}else{document.getElementById("modf_error").innerHTML="*保存失败，请再次保存"}}}function SortPersonalDataObj(){var e=GetContactsBooks();var t=new Array;var n=new Array;var r=new Array;var i=new Array;var s=new Array;var o=new Array;var u=new Array;var a=new Array;var f=new Array;var l=new Array;var c=new Array;var h=new Array;var p=new Array;for(var d=0;d<e.length;++d){var v=e[d];switch(v.depart){case"主席团":t.push(v);break;case"秘书处":n.push(v);break;case"人力资源部":r.push(v);break;case"KSC联盟":i.push(v);break;case"信息编辑部":s.push(v);break;case"组织部":o.push(v);break;case"宣传部":u.push(v);break;case"学术部":a.push(v);break;case"公关部":f.push(v);break;case"体育部":l.push(v);break;case"文娱部":c.push(v);break;case"心理服务部":h.push(v);break;case"指导老师":p.push(v);break}}var m=new Array;m[0]=t;m[1]=n;m[2]=r;m[3]=i;m[4]=s;m[5]=o;m[6]=u;m[7]=a;m[8]=f;m[9]=l;m[10]=c;m[11]=h;m[12]=p;for(g=0;g<t.length;++g){var v;if(t[g].post=="第一副书记兼主席"){v=t[g];t[g]=t[0];t[0]=v;break}}for(var g=1;g<=11;++g){var y=new Array;var b=new Array;var w=new Array;var E=new Array;for(var S=0;S<m[g].length;++S){switch(m[g][S].post){case"部长":y.push(m[g][S]);break;case"副部长":b.push(m[g][S]);break;case"干事":case"人力干事":w.push(m[g][S]);break;default:E.push(m[g][S])}}var x=0;for(l1=0;l1<y.length;++l1){m[g][x++]=y[l1]}for(l2=0;l2<b.length;++l2){m[g][x++]=b[l2]}for(l4=0;l4<E.length;++l4){m[g][x++]=E[l4]}for(l3=0;l3<w.length;++l3){m[g][x++]=w[l3]}}return m}function ShowContactsBooks(){function f(e){try{if(e.birType==""){return""}else if(e.birType==1){return"农历 "+lunarMonths[e.month-1]+lunarMonthDays[e.day-1]}else{return"公历 "+gregorianMonths[e.month-1]+gregorianDays[e.day-1]}}catch(t){return""}}function d(e){var t=document.getElementById(e);var n=t.rows.length;var r=0;for(var i=0;i<n-2;i++){if((t.rows[r].cells[0].innerHTML=="干事"||t.rows[r].cells[0].innerHTML=="人力干事")&&t.rows[r].cells[0].innerHTML==t.rows[i+1].cells[0].innerHTML){t.rows[i+1].removeChild(t.rows[i+1].cells[0]);t.rows[r].cells[0].rowSpan=(t.rows[r].cells[0].rowSpan|0)+1}else{r=i+1}}}if(flagTXL==0){arrObjSortPD=SortPersonalDataObj();flagTXL=1}var e='<div class="sign_of_click" id="txl_sign">\n'+"</div>\n"+'<div class="work_filed" id="txl_work_filed">\n'+'<table id="whole_add">\n'+"<caption>\n"+"电气信息学院团委学生会通讯录\n"+"</caption>\n"+"<thead>\n"+"<tr>\n"+"<th>部门</th><th>职位</th><th>姓名</th><th>QQ</th><th>长号</th><th>短号</th><th>宿舍号</th><th>生日</th><th>年级专业</th>\n"+"</tr>\n"+"</thead>\n";var t=arrObjSortPD[0].length;var n=arrObjSortPD[12].length;var r=0;var i=0;for(o=0;o<arrObjSortPD.length;++o)r+=arrObjSortPD[o].length;i=r-t-n;var s="";for(var o=0;o<n;++o){str+=arrObjSortPD[12][o].name+" "+arrObjSortPD[12][o].longPhoneNum+"  ";alert("KKK")}e+="<tfoot>\n"+"<tr>\n"+'<td colspan="9" scope="col">指导老师：'+s+"</td>\n"+"</tr>\n"+"<tr>\n"+'<td colspan="9" scope="col">主席团共'+t+"人，部长级+干事共"+i+"人</td>\n"+"</tr>\n"+"</tfoot>\n";var u="";var a=new Array("主席团","秘书处","人力资源部","KSC联盟","信息编辑部","组织部","宣传部","学术部","公关部","体育部","文娱部","心理服务部");for(var o=0;o<arrObjSortPD.length-1;++o){var l=arrObjSortPD[o].length;if(arrObjSortPD[o].length>0){var c='<tr class="first_line">\n'+"<th rowspan="+l+' scope="row">'+arrObjSortPD[o][0].depart+"</th>\n"+"<td>"+arrObjSortPD[o][0].post+"</td>\n"+"<td>"+arrObjSortPD[o][0].name+"</td>\n"+"<td>"+arrObjSortPD[o][0].QQNum+"</td>\n"+"<td>"+arrObjSortPD[o][0].longPhoneNum+"</td>\n"+"<td>"+arrObjSortPD[o][0].shortPhoneNum+"</td>\n"+"<td>"+arrObjSortPD[o][0].dormNO+"</td>\n"+"<td>"+f(arrObjSortPD[o][0])+"</td>\n"+"<td>"+arrMajorName[arrObjSortPD[o][0].major]+"</td>\n"+"</tr>\n";var h="";for(var p=1;p<l;++p){h+="<tr>\n"+"<td>"+arrObjSortPD[o][p].post+"</td>\n"+"<td>"+arrObjSortPD[o][p].name+"</td>\n"+"<td>"+arrObjSortPD[o][p].QQNum+"</td>\n"+"<td>"+arrObjSortPD[o][p].longPhoneNum+"</td>\n"+"<td>"+arrObjSortPD[o][p].shortPhoneNum+"</td>\n"+"<td>"+arrObjSortPD[o][p].dormNO+"</td>\n"+"<td>"+f(arrObjSortPD[o][p])+"</td>\n"+"<td>"+arrMajorName[arrObjSortPD[o][p].major]+"</td>\n"+"</tr>\n"}c+=h;u+=c}}e+=u;e+="</tbody>\n"+"</table>\n"+"</div>\n";$("#contacts_books").hide().html(e);d("whole_add");$("#contacts_books").slideDown()}window.onload=UserCenterInit;var lunarMonths=new Array("一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月");var lunarMonthDays=new Array("初一","初二","初三","初四","初五","初六","初七","初八","初九","初十","十一","十二","十三","十四","十五","十六","十七","十八","十九","二十","廿一","廿二","廿三","廿四","廿五","廿六","廿七","廿八","廿九","三十");var gregorianMonths=new Array("1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月");var gregorianDays=new Array("1日","2日","3日","4日","5日","6日","7日","8日","9日","10日","11日","12日","13日","14日","15日","16日","17日","18日","19日","20日","21日","22日","23日","24日","25日","26日","27日","28日","29日","30日","31日");var greMonthDays=new Array(31,29,31,30,31,30,31,31,30,31,30,31);var arrDepartName=new Array("秘书处","人力资源部","宣传部","信息编辑部","学术部","体育部","KSC联盟","组织部","文娱部","公关部","心理服务部","主席团");var arrUserType=new Array("干事","人力干事","部长级","主席团");var arrGender=new Array("女","男","不确定");var arrMajorName=new Array("包装工程","软件工程","电气工程及其自动化","自动化","电子信息科学与技术","信息安全","物联网工程");var flagUserData=0;var flagKKB=0;var flagTXL=0;var objPersonalData;var arrES;var arrObjSortPD